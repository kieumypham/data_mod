@newport.summary.data
@ECO-10150

Feature:
  (ECO-10150) As a Monte Carlo,
   I want to retrieve Newport data to be used for display and calculation of the score.

  # ACCEPTANCE CRITERIA: (ECO-10150)
  # Note 1: This story implements the retrieval of Newport data to be used by Monte Carlo for display and calculation of the score.
  # Note 2: Refer to https://confluence.ec2.local/pages/viewpage.action?pageId=32802800 and/or https://confluence.ec2.local/display/NGCS/14+00+Machine+Data
  # 1. The request for data shall be implemented as a GET request using URI https://<host>/v1/cloud/flowgenerators/{serialNumber}/data?DataTypes={types}&RequestStartDateTime=(startDateTime}&RequestEndDateTime={endDateTime}&Aggregation={collectionInterval}
  # 1a. The serialNumber parameter shall correspond to the serial number of the flow generator.
  # 1b. The DataTypes parameter shall be "TherapySummaries" for the purpose of this card. Note: Monte Carlo does not require detailed or settings data
  # 1c. The RequestStartDateTime and RequestEndDateTime shall be specified in ISO 8601 format and inclusive of the dates specified. Note: If there is no offset specified then the times are assumed to be in the device's local time.
  # 1d. The Aggregation parameter shall be "Daily" for the purpose of this card.
  # 2. On success, the interface shall respond with an HTTP 200 OK.
  # 2a. The response should contain an JSON string with the requested data if available.
  # 2b. The summary data returned shall be consistent with https://confluence.ec2.local/display/NGCS/14+00+Machine+Data
  # 3. If the DataTypes parameter does not contain a valid value then the interface shall respond with an HTTP 400 Bad Request
  # 4. If the RequestStartDateTime or RequestEndDateTime parameters do not contain a valid value then the interface shall respond with an HTTP 400 Bad Request. Note: This includes when the RequestStartDateTime is later than the RequestEndDateTime.
  # 5. If the date range specified by RequestStartDateTime and RequestEndDateTime inclusive is greater than a configurable number of days, then the interface shall respond with an HTTP 400 Bad Request. For the purposes of this card the maximum number of days is 30.
  # 6. If the Aggregation parameter does not contain a valid value then the interface shall respond with an HTTP 400 Bad Request.

   Background:
      Given the server bulk load the following devices and modules
       | /data/manufacturing/batch_new_fg2007_cam2007.xml |
      And manufacture verify the status of the job
       | status           |
       | COMPLETE-SUCCESS |
      And the following units are cached for local use
         | flowGeneratorSerialNumber | communicationModuleSerialNumber |
         | 20070811225               | 20070811225                     |
      And I am a device with the FlowGen serial number "20070811225"
      And I send the following registration
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
         | { "FG": {"SerialNo": "20070811225", "Software": "SX567-0302", "MID": 36, "VID": 25, "PCBASerialNo":"(90)R370-7341(91)2(21)4Z244018", "ProductCode":"37036", "Configuration": "CX036-026-008-024-101-101-100" }, "CAM": {"SerialNo": "20070811225", "Software": "SX558-0308", "PCBASerialNo":"13152G00010", "Subscriptions": [ "30B59434-BF4F-4788-9678-A00FF860C038", "301E6C6C-A3C3-44B9-99D4-171A99FE6BD5", "51960EDB-EA97-4A50-A32C-EACF6239EBE3", "40326F7E-FE53-4D4B-8D7A-51DCC68F1177", "018A5655-81C6-4888-A2AD-6480087BE3B7", "1D1771B2-890B-4576-8863-FC8559C03040", "12A64E97-6E6F-4C18-A78D-7844A827BF28", "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "1C166B19-01FA-4D7D-A825-A25682C7CB0C", "2896C763-FE94-4B3F-AD6C-305583FD4210", "21C219CD-EB66-43E7-B677-50E858BB851B", "28D54873-A79C-47A5-A08F-D55D979418F0", "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "2B04744B-1676-42DE-97ED-199205723183", "24208A76-16A4-427E-BBCF-149A49D9623E", "24208A76-16A4-427E-BBCF-179A49D9718B", "24208A76-16A4-427E-BBCF-179A49D3564C", "2C7CF86E-4E4C-4AEF-97D1-407D23FA9245", "2DD86205-45B5-4023-84D6-40772455902C", "2E30A610-741A-465D-AF65-299CD62BBB1A", "2FADA80D-8094-491C-9481-3CCC471F0372" ] }, "Hum": {"Software": "SX556-0203"} } |
      And I send the following therapy summaries
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 180, "Val.MaskOn": [ 120 ],           "Val.MaskOff": [ 300 ],            "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following device data received events have been published
         | JMSType                        | JMSXGroupID | DeviceDataSource | DeviceFlowGenSerialNumber | DeviceMetadataIdentifier | DeviceVariantIdentifier | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | THERAPY_SUMMARY                | 20070811225 | DEVICE           | 20070811225               | 36                       | 25                      | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 180, "Val.MaskOn": [ 120 ],           "Val.MaskOff": [ 300 ],            "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And I send the following therapy summaries
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 102252", "Val.Mode": "AutoSet", "Val.Duration": 700, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1300 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following device data received events have been published
         | JMSType                        | JMSXGroupID | DeviceDataSource | DeviceFlowGenSerialNumber | DeviceMetadataIdentifier | DeviceVariantIdentifier | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | THERAPY_SUMMARY                | 20070811225 | DEVICE           | 20070811225               | 36                       | 25                      | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 102252", "Val.Mode": "AutoSet", "Val.Duration": 700, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1300 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And I send the following therapy summaries
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "3 days ago", "CollectTime": "2 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 600, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1200 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following device data received events have been published
         | JMSType                        | JMSXGroupID | DeviceDataSource | DeviceFlowGenSerialNumber | DeviceMetadataIdentifier | DeviceVariantIdentifier | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | THERAPY_SUMMARY                | 20070811225 | DEVICE           | 20070811225               | 36                       | 25                      | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "3 days ago", "CollectTime": "2 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 600, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1200 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And I send the following therapy summaries
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "2 days ago", "CollectTime": "1 day ago 102252",  "Val.Mode": "CPAP",    "Val.Duration": 615, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1215 ], "Val.AHI": 5.8, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following device data received events have been published
         | JMSType                        | JMSXGroupID | DeviceDataSource | DeviceFlowGenSerialNumber | DeviceMetadataIdentifier | DeviceVariantIdentifier | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | THERAPY_SUMMARY                | 20070811225 | DEVICE           | 20070811225               | 36                       | 25                      | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "2 days ago", "CollectTime": "1 day ago 102252",  "Val.Mode": "CPAP",    "Val.Duration": 615, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1215 ], "Val.AHI": 5.8, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And I send the following therapy summaries
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "1 day ago",  "CollectTime": "today 010101",      "Val.Mode": "CPAP",    "Val.Duration": 590, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1190 ], "Val.AHI": 5.4, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.0, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following device data received events have been published
         | JMSType                        | JMSXGroupID | DeviceDataSource | DeviceFlowGenSerialNumber | DeviceMetadataIdentifier | DeviceVariantIdentifier | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | THERAPY_SUMMARY                | 20070811225 | DEVICE           | 20070811225               | 36                       | 25                      | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "1 day ago",  "CollectTime": "today 010101",      "Val.Mode": "CPAP",    "Val.Duration": 590, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1190 ], "Val.AHI": 5.4, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.0, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
      And the following therapy summaries are stored in the cloud
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 180, "Val.MaskOn": [ 120 ],           "Val.MaskOff": [ 300 ],            "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 102252", "Val.Mode": "AutoSet", "Val.Duration": 700, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1300 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "3 days ago", "CollectTime": "2 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 600, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1200 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "2 days ago", "CollectTime": "1 day ago 102252",  "Val.Mode": "CPAP",    "Val.Duration": 615, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1215 ], "Val.AHI": 5.8, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |
         | { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "1 day ago",  "CollectTime": "today 010101",      "Val.Mode": "CPAP",    "Val.Duration": 590, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1190 ], "Val.AHI": 5.4, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.0, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } |

  @newport.summary.data.S1
  @ECO-10150.1
  @ECO-10150.1a
  @ECO-10150.1b
  @ECO-10150.1c
  @ECO-10150.1d
  @ECO-10150.2
  @ECO-10150.2a
  @ECO-10150.2b
   Scenario: Retrieve newport summary data, ok response
      When I request newport summary data with the following parameters
         | serialNumber | dataType          | beginDateTime       | endDateTime    | aggregation |
         | 20070811225  | TherapySummaries  | 5 days agoT12:00:00 | todayT12:00:00 | Daily       |
         | 20070811225  | TherapySummaries  | 5 days agoT12:00:00 | todayT12:00:00 | None        |
      Then I should receive a server ok response
      And the following FlowGeneratorDataResponses returned from the cloud
         | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
         | { "FlowGenerator": { "SerialNumber": "20070811225" }, "DataTypes": [ "TherapySummaries" ], "RequestStartDateTime": "5 days agoT12:00:00", "RequestEndDateTime": "todayT12:00:00", "Aggregation": "Daily", "TherapySummaries": [ { "TherapyStartDateTime": "4 days agoT14:00:00", "TherapyDuration": "PT700M", "TherapyMode": "AutoSet", "TherapySessionCount": 3, "ApneaHypopneaIndex": 5.5, "Leak70Percentile": 0.1, "Leak95Percentile" :0.3 }, { "TherapyStartDateTime": "3 days agoT14:00:00", "TherapyDuration": "PT600M", "TherapyMode": "CPAP", "TherapySessionCount": 3, "ApneaHypopneaIndex": 5.5, "Leak70Percentile": 0.1, "Leak95Percentile" :0.3 }, { "TherapyStartDateTime": "2 days agoT14:00:00", "TherapyDuration": "PT615M", "TherapyMode": "CPAP", "TherapySessionCount": 3, "ApneaHypopneaIndex":5.8, "Leak70Percentile":0.1, "Leak95Percentile":0.3}, { "TherapyStartDateTime": "1 day agoT14:00:00", "TherapyDuration":"PT590M", "TherapyMode": "CPAP", "TherapySessionCount":3, "ApneaHypopneaIndex": 5.4, "Leak70Percentile": 0.0, "Leak95Percentile": 0.3} ] } |
         | { "FlowGenerator": { "SerialNumber": "20070811225" }, "DataTypes": [ "TherapySummaries" ], "RequestStartDateTime": "5 days agoT12:00:00", "RequestEndDateTime": "todayT12:00:00", "Aggregation": "None",  "TherapySummaries": [ { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 090100", "Val.Mode": "CPAP",    "Val.Duration": 180, "Val.MaskOn": [ 120 ],           "Val.MaskOff": [ 300 ],            "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 }, { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "4 days ago", "CollectTime": "3 days ago 102252", "Val.Mode": "AutoSet", "Val.Duration": 700, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1300 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 }, { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "3 days ago", "CollectTime": "2 days ago 090100", "Val.Mode": "CPAP", "Val.Duration": 600, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1200 ], "Val.AHI": 5.5, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 }, { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "2 days ago", "CollectTime": "1 day ago 102252",  "Val.Mode": "CPAP", "Val.Duration": 615, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1215 ], "Val.AHI": 5.8, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.1, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 }, { "FG.SerialNo": "20070811225", "SubscriptionId": "12CE1A82-93A9-4839-948A-E3F8FD51C9FE", "Date": "1 day ago",  "CollectTime": "today 010101",      "Val.Mode": "CPAP", "Val.Duration": 590, "Val.MaskOn": [ 120, 340, 450 ], "Val.MaskOff": [ 300, 400, 1190 ], "Val.AHI": 5.4, "Val.AI": 5.5, "Val.HI": 5.5, "Val.OAI": 5.5, "Val.CAI": 5.5, "Val.UAI": 5.5, "Val.Leak.50": 4.3, "Val.Leak.70" : 0.0, "Val.Leak.95": 0.3, "Val.Leak.Max": 0.123, "Val.CSR": 990, "Val.RIN": 5.5, "Val.Humidifier": "Internal", "Val.HeatedTube": "None", "Val.AmbHumidity": 25, "Val.HTubePow.50" : 5, "Val.HumPow.50" : 19 } ] } |

  @newport.summary.data.S2
  @ECO-10150.3
   Scenario: Retrieve newport summary data, the DataTypes parameter does not contain a valid value, Bad Request response
      When I request newport summary data with the following parameters
         | serialNumber | dataType          | beginDateTime       | endDateTime    | aggregation |
         | 20070811225  | Therapy           | 5 days agoT12:00:00 | todayT12:00:00 | Daily       |
      Then I should receive a server bad-request response

  @newport.summary.data.S3
  @ECO-10150.4
   Scenario: Retrieve newport summary data, the RequestStartDateTime or RequestEndDateTime parameters do not contain a valid value, Bad Request response
      When I request newport summary data with the following parameters
         | serialNumber | dataType          | beginDateTime       | endDateTime         | aggregation |
         | 20070811225  | TherapySummaries  | todayT12:00:00      | 5 days agoT12:00:00 | Daily       |
      Then I should receive a server bad-request response

  @newport.summary.data.S4
  @ECO-10150.5
   Scenario: Retrieve newport summary data, the date range specified by RequestStartDateTime and RequestEndDateTime inclusive is greater than a configurable number of days, Bad Request response
      When I request newport summary data with the following parameters
         | serialNumber | dataType          | beginDateTime        | endDateTime    | aggregation |
         | 20070811225  | TherapySummaries  | 32 days agoT12:00:00 | todayT12:00:00 | Daily       |
      Then I should receive a server bad-request response

  @newport.summary.data.S5
  @ECO-10150.6
   Scenario: Retrieve newport summary data, the Aggregation parameter does not contain a valid value, Bad Request response
      When I request newport summary data with the following parameters
         | serialNumber | dataType          | beginDateTime       | endDateTime    | aggregation |
         | 20070811225  | TherapySummaries  | 5 days agoT12:00:00 | todayT12:00:00 | Ever        |
      Then I should receive a server bad-request response
